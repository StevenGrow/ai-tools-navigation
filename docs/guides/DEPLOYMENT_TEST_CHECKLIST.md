# 部署测试清单

本文档提供了 Vercel 部署后的完整测试清单，确保所有功能在生产环境中正常工作。

## 🚀 部署前检查

在触发 Vercel 部署之前，请确认：

- [ ] 所有代码已提交到 GitHub
- [ ] Supabase 项目已正确配置
- [ ] 环境变量已在 Vercel 项目设置中配置
- [ ] 本地测试已通过

## 📋 部署后功能测试

### 1. 基础页面测试

- [ ] **页面加载**
  - 访问部署的 URL
  - 页面在 3 秒内完全加载
  - 所有样式正确显示
  - 没有明显的布局问题

- [ ] **静态资源**
  - CSS 文件正确加载
  - JavaScript 文件正确加载
  - 图标和图片正确显示
  - 字体正确加载

### 2. 搜索功能测试

- [ ] **基础搜索**
  - 搜索框正常显示
  - 输入关键词能正常搜索
  - 搜索结果正确显示
  - 清空搜索框显示所有工具

- [ ] **搜索结果**
  - 搜索 "ChatGPT" 显示相关结果
  - 搜索 "画图" 显示绘画类工具
  - 搜索不存在的工具显示空结果提示

### 3. 用户认证测试

- [ ] **注册功能**
  - 点击注册按钮显示注册模态框
  - 输入有效邮箱和密码能成功注册
  - 注册成功后自动登录
  - 导航栏显示用户信息

- [ ] **登录功能**
  - 点击登录按钮显示登录模态框
  - 使用正确凭证能成功登录
  - 登录成功后模态框关闭
  - 导航栏更新显示用户状态

- [ ] **登出功能**
  - 点击登出按钮能成功登出
  - 登出后导航栏恢复未登录状态
  - 自定义工具功能被隐藏

- [ ] **会话保持**
  - 登录后刷新页面仍保持登录状态
  - 关闭浏览器重新打开仍保持登录状态

### 4. 自定义工具功能测试

- [ ] **添加工具**
  - 登录后显示"添加工具"按钮
  - 点击按钮显示添加工具模态框
  - 填写完整信息能成功添加工具
  - 新工具出现在对应分类中

- [ ] **查看工具**
  - 自定义工具正确显示在对应分类
  - 自定义工具有特殊标识
  - 工具信息（名称、描述、链接）正确显示

- [ ] **编辑工具**
  - 自定义工具显示编辑按钮
  - 点击编辑按钮显示预填充的编辑表单
  - 修改信息后能成功更新
  - 页面显示更新后的信息

- [ ] **删除工具**
  - 自定义工具显示删除按钮
  - 点击删除按钮显示确认对话框
  - 确认删除后工具从页面消失
  - 工具从数据库中被删除

### 5. 搜索增强功能测试

- [ ] **搜索自定义工具**
  - 登录后搜索能找到自定义工具
  - 搜索结果正确区分系统工具和自定义工具
  - 未登录时搜索不显示自定义工具

### 6. 响应式设计测试

- [ ] **桌面端测试**
  - 在 1920x1080 分辨率下正常显示
  - 在 1366x768 分辨率下正常显示
  - 所有功能正常工作

- [ ] **平板端测试**
  - 在 iPad (768x1024) 下正常显示
  - 触摸操作正常响应
  - 模态框适配屏幕尺寸

- [ ] **手机端测试**
  - 在 iPhone (375x667) 下正常显示
  - 在 Android (360x640) 下正常显示
  - 按钮大小适合触摸操作
  - 表单输入体验良好

## 🔍 技术检查

### 1. 控制台错误检查

打开浏览器开发者工具（F12），检查：

- [ ] **Console 标签页**
  - 没有 JavaScript 错误
  - 没有 404 资源加载错误
  - Supabase 连接成功的日志

- [ ] **Network 标签页**
  - 所有资源成功加载（状态码 200）
  - API 请求正常响应
  - 没有 CORS 错误

### 2. 环境变量验证

在浏览器控制台中运行以下命令：

```javascript
// 检查 Supabase 客户端
console.log('Supabase client:', window.supabaseClient);

// 检查配置
console.log('Config status:', window.supabaseClient ? '✅ 已配置' : '❌ 未配置');

// 测试连接（可选）
window.supabaseClient.auth.getSession().then(console.log);
```

预期结果：
- [ ] Supabase 客户端对象存在
- [ ] 没有配置相关错误
- [ ] 能够获取会话信息

### 3. 数据库连接测试

- [ ] **注册测试用户**
  - 使用测试邮箱注册
  - 检查 Supabase 仪表板中的 auth.users 表
  - 确认用户记录已创建

- [ ] **添加测试工具**
  - 登录测试用户
  - 添加一个测试工具
  - 检查 Supabase 仪表板中的 custom_tools 表
  - 确认工具记录已创建且关联正确用户

## 🚨 常见问题排查

### 问题 1: 页面显示空白

**可能原因：**
- JavaScript 文件加载失败
- Supabase 配置错误
- 环境变量未正确设置

**排查步骤：**
1. 检查浏览器控制台错误
2. 验证所有静态文件是否正确部署
3. 检查 Vercel 环境变量配置

### 问题 2: 认证功能不工作

**可能原因：**
- Supabase URL 或 Key 错误
- 网络连接问题
- RLS 策略配置错误

**排查步骤：**
1. 验证 Supabase 配置
2. 检查 Supabase 项目状态
3. 测试 API 连接

### 问题 3: 自定义工具不显示

**可能原因：**
- 数据库查询失败
- 权限配置错误
- 用户未正确登录

**排查步骤：**
1. 检查用户登录状态
2. 验证数据库 RLS 策略
3. 查看网络请求是否成功

## ✅ 测试完成确认

完成所有测试后，请确认：

- [ ] 所有基础功能正常工作
- [ ] 用户认证流程完整
- [ ] 自定义工具 CRUD 操作正常
- [ ] 响应式设计在各设备上正常
- [ ] 没有控制台错误
- [ ] 数据库连接正常
- [ ] 性能表现良好（页面加载 < 3秒）

## 📝 测试报告模板

```
# Vercel 部署测试报告

**部署时间：** [填写部署时间]
**部署 URL：** [填写 Vercel 分配的 URL]
**测试时间：** [填写测试时间]
**测试人员：** [填写测试人员]

## 测试结果概览

- 基础功能：✅/❌
- 用户认证：✅/❌
- 自定义工具：✅/❌
- 响应式设计：✅/❌
- 技术检查：✅/❌

## 发现的问题

1. [问题描述]
   - 严重程度：高/中/低
   - 影响范围：[描述]
   - 解决方案：[描述]

## 总体评估

[填写总体评估结果]

## 建议

[填写改进建议]
```

---

**注意：** 请在每次部署后都执行这个测试清单，确保生产环境的稳定性和功能完整性。