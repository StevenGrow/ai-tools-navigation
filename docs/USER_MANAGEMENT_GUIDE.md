# 👥 用户管理功能使用指南

## 功能概述

用户管理功能允许管理员查看所有用户的详细信息、管理用户权限、查看用户添加的工具等。

## 使用步骤

### 1. 打开用户管理

1. 以管理员身份登录网站
2. 点击右上角的 "👑 管理面板" 按钮
3. 切换到 "👥 用户管理" 标签页

### 2. 查看用户列表

用户列表显示所有添加过工具的用户，包含以下信息：

**用户信息：**
- 👤 用户头像（管理员显示 👑）
- 用户ID（前12位）
- 管理员徽章（如果是管理员）

**统计信息：**
- 📦 总工具数量
- 👑 系统工具数量
- 👤 个人工具数量
- ⏰ 最后活跃时间

**排序规则：**
- 按工具数量从多到少排序
- 管理员用户有特殊标识

### 3. 搜索用户

在搜索框中输入用户ID的任意部分，即可快速筛选用户。

## 核心功能

### 📋 查看用户工具

**操作步骤：**
1. 找到目标用户
2. 点击 "📋 查看工具" 按钮
3. 在弹出的对话框中查看该用户的所有工具

**显示内容：**
- 工具名称和类型（系统/个人）
- 工具描述
- 工具分类
- 创建时间
- 访问链接

**快捷操作：**
- 点击 "🔗 访问" 按钮直接打开工具网站

### ⚙️ 管理用户权限

#### 授予管理员权限

**操作步骤：**
1. 找到目标用户
2. 点击 "➕ 设为管理员" 按钮
3. 选择要授予的角色：
   - **超级管理员**：拥有所有权限
   - **管理员**：可以管理工具和用户
   - **版主**：可以审核和管理工具
4. 点击 "授予权限" 确认

#### 更新管理员角色

**操作步骤：**
1. 找到已是管理员的用户
2. 点击 "⚙️ 管理权限" 按钮
3. 在下拉菜单中选择新角色
4. 点击 "更新角色" 确认

#### 移除管理员权限

**操作步骤：**
1. 找到已是管理员的用户
2. 点击 "⚙️ 管理权限" 按钮
3. 点击 "移除管理员权限" 按钮
4. 确认操作

## 角色权限说明

### 👑 超级管理员 (super_admin)
- 拥有所有权限
- 可以管理其他管理员
- 可以修改系统设置
- 可以查看所有数据

### 🛡️ 管理员 (admin)
- 可以管理所有工具
- 可以管理普通用户
- 可以查看统计数据
- 不能管理其他管理员

### 🔰 版主 (moderator)
- 可以审核用户提交的工具
- 可以编辑和删除工具
- 可以查看基础统计
- 不能管理用户权限

## 用户活动时间

系统会自动记录用户的最后活动时间：

- **今天**：用户今天有活动
- **昨天**：用户昨天有活动
- **X天前**：用户X天前最后活跃

活动时间基于用户最后添加工具的时间。

## 使用场景

### 场景1：查找活跃用户
1. 查看用户列表
2. 关注工具数量多的用户
3. 查看他们添加的工具质量

### 场景2：授予管理员权限
1. 识别贡献较多的用户
2. 授予适当的管理员权限
3. 让他们帮助管理社区

### 场景3：审查用户工具
1. 点击 "查看工具" 查看用户的所有工具
2. 检查工具质量和合规性
3. 必要时进行管理操作

### 场景4：权限调整
1. 定期审查管理员列表
2. 根据活跃度调整权限
3. 移除不活跃的管理员

## 安全机制

### 权限验证
- 只有管理员可以访问用户管理功能
- 数据库层面的权限控制
- 操作前需要确认

### 操作记录
- 所有权限变更都会记录
- 可追溯的操作历史
- 防止误操作

### 数据保护
- 用户ID部分隐藏
- 敏感信息不显示
- 符合隐私保护要求

## 技术实现

### 数据统计
- 实时统计用户工具数量
- 区分系统工具和个人工具
- 计算最后活跃时间

### 权限管理
- 使用 `admin_users` 表存储管理员信息
- 支持多角色系统
- 灵活的权限分配

### 性能优化
- 用户列表按工具数量排序
- 搜索功能即时响应
- 模态框按需加载

## 常见问题

### Q: 为什么有些用户不在列表中？
A: 只显示添加过工具的用户。没有添加工具的用户不会出现在列表中。

### Q: 可以查看用户的邮箱吗？
A: 出于隐私保护，当前版本不显示用户邮箱，只显示用户ID。

### Q: 如何区分管理员和普通用户？
A: 管理员用户有金色头像（👑）和角色徽章。

### Q: 可以批量管理用户吗？
A: 当前版本需要逐个操作，批量用户管理功能在后续版本中实现。

### Q: 移除管理员权限后可以恢复吗？
A: 可以，只需重新授予管理员权限即可。

## 最佳实践

### 权限分配建议
1. **谨慎授予超级管理员权限**
   - 只给最信任的核心成员
   - 控制超级管理员数量

2. **合理使用管理员角色**
   - 给活跃贡献者授予管理员权限
   - 定期审查管理员活跃度

3. **版主角色适合新手**
   - 让新管理员从版主开始
   - 观察一段时间后再升级

### 用户管理流程
1. **定期审查用户列表**
   - 每周查看一次活跃用户
   - 识别优质贡献者

2. **及时处理问题**
   - 发现违规工具及时处理
   - 必要时联系用户

3. **激励优质用户**
   - 给予管理员权限
   - 认可他们的贡献

## 下一步计划

- [ ] 用户详细资料页面
- [ ] 用户操作历史记录
- [ ] 批量用户管理
- [ ] 用户消息通知
- [ ] 用户封禁功能
- [ ] 用户等级系统

---

**提示：** 用户管理功能强大，请谨慎使用权限管理功能，确保社区健康发展。
