# 👑 管理员面板使用指南

## 功能概述

管理员面板是一个强大的控制中心，让管理员可以轻松管理网站的所有工具和用户。

## 访问方式

### 前提条件
1. 用户必须是管理员（在 `admin_users` 表中）
2. 已登录账号

### 打开面板
- 登录后，导航栏会显示 **"👑 管理面板"** 按钮
- 点击按钮即可打开管理员面板

## 功能模块

### 📊 统计概览

显示网站的关键数据：
- **系统工具数** - 管理员添加的公开工具数量
- **用户工具数** - 所有用户添加的个人工具数量
- **注册用户数** - 添加过工具的用户数量
- **总工具数** - 系统工具 + 用户工具总数

### 🛠️ 工具管理

管理所有工具（系统工具 + 用户工具）：

**功能：**
- 查看所有工具列表
- 搜索工具（按名称、描述、URL）
- 过滤工具（全部/系统工具/用户工具）
- 编辑任何工具
- 删除任何工具

**工具信息显示：**
- 👑 图标 = 系统工具（管理员添加）
- 👤 图标 = 用户工具（普通用户添加）
- 标签：免费/付费、中文/英文
- 工具描述
- 工具链接
- 分类
- 创建日期

**操作按钮：**
- ✏️ 编辑 - 打开编辑模态框
- 🗑️ 删除 - 删除工具（需确认）

### 👥 用户管理

查看和管理用户：

**功能：**
- 查看所有用户列表
- 搜索用户
- 查看用户工具统计

**用户信息显示：**
- 用户 ID（前 8 位）
- 工具数量

## 使用场景

### 场景 1：查看网站统计
1. 打开管理员面板
2. 默认显示统计概览
3. 查看各项数据

### 场景 2：管理工具
1. 打开管理员面板
2. 切换到"工具管理"标签
3. 使用搜索或过滤功能找到目标工具
4. 点击"编辑"或"删除"按钮

### 场景 3：编辑工具
1. 在工具列表中找到要编辑的工具
2. 点击"✏️ 编辑"按钮
3. 在弹出的编辑模态框中修改信息
4. 保存更改

### 场景 4：删除工具
1. 在工具列表中找到要删除的工具
2. 点击"🗑️ 删除"按钮
3. 确认删除操作
4. 工具被删除，列表自动刷新

### 场景 5：查看用户
1. 打开管理员面板
2. 切换到"用户管理"标签
3. 查看所有用户及其工具数量

## 技术实现

### 文件结构
```
src/
├── css/
│   └── admin-panel.css          # 管理员面板样式
├── js/
│   └── modules/
│       └── admin-panel.js       # 管理员面板逻辑
```

### 核心类：AdminPanel

**主要方法：**
- `show()` - 显示面板
- `hide()` - 隐藏面板
- `switchTab(tabName)` - 切换标签页
- `loadStats()` - 加载统计数据
- `loadTools()` - 加载工具列表
- `loadUsers()` - 加载用户列表
- `filterTools(filter)` - 过滤工具
- `searchTools(term)` - 搜索工具
- `editTool(toolId)` - 编辑工具
- `deleteTool(toolId)` - 删除工具

### 数据库查询

**统计数据：**
```javascript
// 系统工具数
SELECT COUNT(*) FROM custom_tools WHERE is_admin_tool = true

// 用户工具数
SELECT COUNT(*) FROM custom_tools WHERE is_admin_tool = false

// 用户数（估算）
SELECT DISTINCT user_id FROM custom_tools
```

**工具列表：**
```javascript
SELECT * FROM custom_tools ORDER BY created_at DESC
```

## 权限控制

### 访问权限
- 只有管理员可以看到"管理面板"按钮
- 只有管理员可以打开管理员面板
- 所有操作都需要管理员权限

### 数据权限
- 管理员可以查看所有工具
- 管理员可以编辑所有工具
- 管理员可以删除所有工具
- 管理员可以查看用户统计

## 响应式设计

### 桌面端（>768px）
- 面板宽度：1200px
- 统计卡片：4 列网格
- 完整功能显示

### 平板端（768px）
- 面板宽度：95%
- 统计卡片：2 列网格
- 标签页可滚动

### 移动端（<480px）
- 面板全屏显示
- 统计卡片：1 列
- 工具列表垂直布局
- 操作按钮适配小屏幕

## 性能优化

### 数据加载
- 标签页切换时才加载对应数据
- 避免重复加载
- 使用加载状态提示

### 搜索和过滤
- 客户端过滤，无需重新查询
- 防抖搜索（300ms）
- 实时更新结果

## 未来扩展

### 计划功能
1. **批量操作**
   - 批量选择工具
   - 批量删除
   - 批量修改分类

2. **高级统计**
   - 工具使用统计
   - 用户活跃度分析
   - 数据可视化图表

3. **用户管理增强**
   - 查看用户详细信息
   - 用户权限管理
   - 用户封禁/解封

4. **审核功能**
   - 工具审核队列
   - 审核历史记录
   - 自动审核规则

5. **操作日志**
   - 记录所有管理员操作
   - 日志查询和导出
   - 敏感操作告警

## 常见问题

### Q: 为什么看不到管理面板按钮？
A: 确保你的账号在 `admin_users` 表中，并且已经登录。

### Q: 如何添加第一个管理员？
A: 在 Supabase SQL Editor 中运行：
```sql
INSERT INTO admin_users (user_id, role) 
VALUES ('你的user_id', 'super_admin');
```

### Q: 编辑工具后为什么没有更新？
A: 编辑操作会关闭面板并打开编辑模态框，保存后需要重新打开面板查看更新。

### Q: 删除工具需要确认吗？
A: 是的，删除操作会弹出确认对话框，防止误删。

### Q: 可以恢复删除的工具吗？
A: 目前不支持恢复，删除是永久性的。建议在删除前仔细确认。

## 快捷键

目前暂无快捷键支持，计划在未来版本中添加：
- `Ctrl/Cmd + K` - 打开管理面板
- `Ctrl/Cmd + F` - 聚焦搜索框
- `Esc` - 关闭面板

## 反馈和建议

如果你有任何建议或发现问题，请：
1. 在 GitHub 提交 Issue
2. 联系项目维护者
3. 提交 Pull Request

---

**提示**：管理员面板是一个强大的工具，请谨慎使用删除功能！
