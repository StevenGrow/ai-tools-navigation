<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å“åº”å¼å¸ƒå±€æµ‹è¯• - AI å·¥å…·å¯¼èˆª</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* æµ‹è¯•ä¸“ç”¨æ ·å¼ */
        .test-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            z-index: 10000;
            font-size: 0.8rem;
            max-width: 300px;
        }
        
        .test-controls {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .test-btn {
            padding: 0.5rem;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .test-btn:hover {
            background: #5b21b6;
        }
        
        .test-info {
            margin-bottom: 0.5rem;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        .test-results {
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.7rem;
        }
        
        .test-result {
            padding: 0.3rem;
            margin-bottom: 0.3rem;
            border-radius: 3px;
        }
        
        .test-pass {
            background: rgba(16, 185, 129, 0.3);
            border-left: 3px solid #10b981;
        }
        
        .test-fail {
            background: rgba(239, 68, 68, 0.3);
            border-left: 3px solid #ef4444;
        }
        
        .test-warning {
            background: rgba(245, 158, 11, 0.3);
            border-left: 3px solid #f59e0b;
        }
        
        /* æµ‹è¯•æ¨¡å¼æŒ‡ç¤ºå™¨ */
        .viewport-indicator {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            z-index: 9999;
        }
        
        /* æµ‹è¯•é«˜äº® */
        .test-highlight {
            outline: 2px dashed #6366f1 !important;
            outline-offset: 2px;
        }
        
        .test-error-highlight {
            outline: 2px dashed #ef4444 !important;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- æµ‹è¯•æ§åˆ¶é¢æ¿ -->
    <div class="test-panel">
        <h3>å“åº”å¼æµ‹è¯•é¢æ¿</h3>
        <div class="test-info">
            <div>å½“å‰è§†å£: <span id="currentViewport">æœªçŸ¥</span></div>
            <div>å±å¹•å°ºå¯¸: <span id="screenSize">æœªçŸ¥</span></div>
            <div>è®¾å¤‡åƒç´ æ¯”: <span id="devicePixelRatio">æœªçŸ¥</span></div>
        </div>
        
        <div class="test-controls">
            <button class="test-btn" onclick="testDesktopLayout()">æµ‹è¯•æ¡Œé¢ç«¯ (1200px)</button>
            <button class="test-btn" onclick="testTabletLayout()">æµ‹è¯•å¹³æ¿ç«¯ (768px)</button>
            <button class="test-btn" onclick="testMobileLayout()">æµ‹è¯•æ‰‹æœºç«¯ (375px)</button>
            <button class="test-btn" onclick="runAllTests()">è¿è¡Œå…¨éƒ¨æµ‹è¯•</button>
            <button class="test-btn" onclick="clearResults()">æ¸…é™¤ç»“æœ</button>
        </div>
        
        <div class="test-results" id="testResults">
            <div class="test-result test-pass">æµ‹è¯•ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
        </div>
    </div>
    
    <!-- è§†å£æŒ‡ç¤ºå™¨ -->
    <div class="viewport-indicator" id="viewportIndicator">
        è§†å£: æœªçŸ¥
    </div>

    <!-- ä¸»è¦å†…å®¹ - å¤åˆ¶è‡ª index.html -->
    <header>
        <div class="header-content">
            <h1>AI å·¥å…·å¯¼èˆª</h1>
            <p class="subtitle">ç²¾é€‰ä¼˜è´¨ AI å·¥å…·ï¼Œæå‡å·¥ä½œæ•ˆç‡</p>
            
            <!-- ç”¨æˆ·æ“ä½œåŒºåŸŸ -->
            <div class="user-actions">
                <button id="loginBtn" class="auth-btn">ç™»å½•</button>
                <button id="registerBtn" class="auth-btn auth-btn-primary">æ³¨å†Œ</button>
                <div id="userInfo" class="user-info hidden">
                    <span id="userEmail" class="user-email">test@example.com</span>
                    <button id="logoutBtn" class="auth-btn auth-btn-secondary">ç™»å‡º</button>
                </div>
            </div>
            
            <!-- æœç´¢æ¡† -->
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” æœç´¢ AI å·¥å…·...">
            </div>
        </div>
    </header>

    <!-- åˆ†ç±»å¯¼èˆª -->
    <nav class="category-nav">
        <a href="#chat" class="nav-item">ğŸ’¬ å¯¹è¯åŠ©æ‰‹</a>
        <a href="#image" class="nav-item">ğŸ¨ ç»˜ç”»</a>
        <a href="#video" class="nav-item">ğŸ¬ è§†é¢‘</a>
        <a href="#writing" class="nav-item">âœï¸ å†™ä½œ</a>
        <a href="#coding" class="nav-item">ğŸ’» ç¼–ç¨‹</a>
        <a href="#audio" class="nav-item">ğŸµ éŸ³é¢‘</a>
    </nav>

    <main class="container">
        <!-- AI å¯¹è¯åŠ©æ‰‹ -->
        <section class="category" id="chat" data-category="chat">
            <h2 class="category-title">ğŸ’¬ AI å¯¹è¯åŠ©æ‰‹</h2>
            <div class="tools-grid">
                <div class="tool-card">
                    <div class="tool-content">
                        <div class="tool-name">ChatGPT<span class="tag tag-paid">ä»˜è´¹</span></div>
                        <div class="tool-desc">OpenAI çš„å¯¹è¯å¼ AI åŠ©æ‰‹</div>
                    </div>
                </div>
                <div class="tool-card custom-tool-card">
                    <div class="tool-content">
                        <div class="tool-name">è‡ªå®šä¹‰å·¥å…·<span class="tag tag-free">å…è´¹</span><span class="tag tag-custom">è‡ªå®šä¹‰</span></div>
                        <div class="tool-desc">ç”¨æˆ·æ·»åŠ çš„è‡ªå®šä¹‰ AI å·¥å…·</div>
                    </div>
                    <div class="tool-actions">
                        <button class="tool-action-btn edit-tool-btn">ç¼–è¾‘</button>
                        <button class="tool-action-btn delete-tool-btn">åˆ é™¤</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI ç»˜ç”» -->
        <section class="category" id="image" data-category="image">
            <h2 class="category-title">ğŸ¨ AI ç»˜ç”»</h2>
            <div class="tools-grid">
                <div class="tool-card">
                    <div class="tool-content">
                        <div class="tool-name">Midjourney<span class="tag tag-paid">ä»˜è´¹</span></div>
                        <div class="tool-desc">é«˜è´¨é‡ AI ç»˜ç”»å·¥å…·</div>
                    </div>
                </div>
                <div class="tool-card">
                    <div class="tool-content">
                        <div class="tool-name">Stable Diffusion<span class="tag tag-free">å…è´¹</span></div>
                        <div class="tool-desc">å¼€æº AI ç»˜ç”»æ¨¡å‹</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 AI å·¥å…·å¯¼èˆª | æŒç»­æ›´æ–°ä¸­</p>
    </footer>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button id="backToTop" class="back-to-top show" title="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- æ·»åŠ å·¥å…·æŒ‰é’® -->
    <button id="addToolBtn" class="add-tool-btn show" title="æ·»åŠ è‡ªå®šä¹‰å·¥å…·">+</button>

    <!-- æµ‹è¯•æ¨¡æ€æ¡† -->
    <div id="testModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>æµ‹è¯•æ¨¡æ€æ¡†</h2>
                <button class="modal-close" onclick="closeTestModal()">&times;</button>
            </div>
            <form class="auth-form">
                <div class="form-group">
                    <label for="testEmail">é‚®ç®±</label>
                    <input type="email" id="testEmail" class="form-input" placeholder="è¯·è¾“å…¥é‚®ç®±" required>
                </div>
                <div class="form-group">
                    <label for="testPassword">å¯†ç </label>
                    <input type="password" id="testPassword" class="form-input" placeholder="è¯·è¾“å…¥å¯†ç " required>
                </div>
                <div class="form-group">
                    <label class="checkbox-group-label">é€‰é¡¹</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" class="checkbox-input">
                            <span class="checkbox-label">é€‰é¡¹ 1</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="checkbox-input">
                            <span class="checkbox-label">é€‰é¡¹ 2</span>
                        </label>
                    </div>
                </div>
                <button type="submit" class="form-submit-btn">æäº¤</button>
            </form>
        </div>
    </div>

    <script>
        // å“åº”å¼æµ‹è¯•è„šæœ¬
        class ResponsiveLayoutTester {
            constructor() {
                this.testResults = [];
                this.currentTest = '';
                this.init();
            }

            init() {
                this.updateViewportInfo();
                window.addEventListener('resize', () => this.updateViewportInfo());
                
                // é˜²æ­¢è¡¨å•æäº¤
                document.querySelector('#testModal form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.logResult('è¡¨å•æäº¤æµ‹è¯•', 'è¡¨å•æäº¤è¢«æ­£ç¡®é˜»æ­¢', 'pass');
                });
            }

            updateViewportInfo() {
                const width = window.innerWidth;
                const height = window.innerHeight;
                const dpr = window.devicePixelRatio || 1;
                
                let viewport = 'Unknown';
                if (width > 1024) viewport = 'Desktop';
                else if (width > 768) viewport = 'Tablet';
                else if (width > 480) viewport = 'Mobile Large';
                else if (width > 320) viewport = 'Mobile Small';
                else viewport = 'Mobile XS';

                document.getElementById('currentViewport').textContent = viewport;
                document.getElementById('screenSize').textContent = `${width} Ã— ${height}`;
                document.getElementById('devicePixelRatio').textContent = dpr;
                document.getElementById('viewportIndicator').textContent = `è§†å£: ${viewport} (${width}px)`;
            }

            logResult(test, message, type = 'pass') {
                const result = { test, message, type, timestamp: new Date().toLocaleTimeString() };
                this.testResults.push(result);
                this.updateResultsDisplay();
            }

            updateResultsDisplay() {
                const container = document.getElementById('testResults');
                container.innerHTML = this.testResults.map(result => 
                    `<div class="test-result test-${result.type}">
                        <strong>[${result.timestamp}] ${result.test}:</strong><br>
                        ${result.message}
                    </div>`
                ).join('');
                container.scrollTop = container.scrollHeight;
            }

            // æµ‹è¯•æ¡Œé¢ç«¯å¸ƒå±€
            testDesktopLayout() {
                this.currentTest = 'æ¡Œé¢ç«¯å¸ƒå±€æµ‹è¯•';
                this.logResult(this.currentTest, 'å¼€å§‹æµ‹è¯•æ¡Œé¢ç«¯å¸ƒå±€ (>1024px)', 'pass');
                
                // æ¨¡æ‹Ÿæ¡Œé¢ç«¯è§†å£
                this.simulateViewport(1200, 800);
                
                setTimeout(() => {
                    this.testHeaderLayout();
                    this.testNavigationLayout();
                    this.testGridLayout();
                    this.testModalLayout();
                    this.testButtonPositions();
                    
                    this.logResult(this.currentTest, 'æ¡Œé¢ç«¯å¸ƒå±€æµ‹è¯•å®Œæˆ', 'pass');
                }, 100);
            }

            // æµ‹è¯•å¹³æ¿ç«¯å¸ƒå±€
            testTabletLayout() {
                this.currentTest = 'å¹³æ¿ç«¯å¸ƒå±€æµ‹è¯•';
                this.logResult(this.currentTest, 'å¼€å§‹æµ‹è¯•å¹³æ¿ç«¯å¸ƒå±€ (768px)', 'pass');
                
                // æ¨¡æ‹Ÿå¹³æ¿ç«¯è§†å£
                this.simulateViewport(768, 1024);
                
                setTimeout(() => {
                    this.testHeaderLayout();
                    this.testNavigationLayout();
                    this.testGridLayout();
                    this.testModalLayout();
                    this.testButtonPositions();
                    this.testTouchInteractions();
                    
                    this.logResult(this.currentTest, 'å¹³æ¿ç«¯å¸ƒå±€æµ‹è¯•å®Œæˆ', 'pass');
                }, 100);
            }

            // æµ‹è¯•æ‰‹æœºç«¯å¸ƒå±€
            testMobileLayout() {
                this.currentTest = 'æ‰‹æœºç«¯å¸ƒå±€æµ‹è¯•';
                this.logResult(this.currentTest, 'å¼€å§‹æµ‹è¯•æ‰‹æœºç«¯å¸ƒå±€ (375px)', 'pass');
                
                // æ¨¡æ‹Ÿæ‰‹æœºç«¯è§†å£
                this.simulateViewport(375, 667);
                
                setTimeout(() => {
                    this.testHeaderLayout();
                    this.testNavigationLayout();
                    this.testGridLayout();
                    this.testModalLayout();
                    this.testButtonPositions();
                    this.testTouchInteractions();
                    this.testMobileSpecificFeatures();
                    
                    this.logResult(this.currentTest, 'æ‰‹æœºç«¯å¸ƒå±€æµ‹è¯•å®Œæˆ', 'pass');
                }, 100);
            }

            // æ¨¡æ‹Ÿä¸åŒè§†å£å°ºå¯¸
            simulateViewport(width, height) {
                // æ³¨æ„ï¼šè¿™åªæ˜¯è§†è§‰ä¸Šçš„æ¨¡æ‹Ÿï¼Œå®é™…çš„åª’ä½“æŸ¥è¯¢ä»åŸºäºçœŸå®è§†å£
                document.body.style.width = width + 'px';
                document.body.style.maxWidth = width + 'px';
                document.body.style.margin = '0 auto';
                document.body.style.border = '2px solid #6366f1';
                
                // è§¦å‘ resize äº‹ä»¶
                window.dispatchEvent(new Event('resize'));
                
                this.logResult(this.currentTest, `è§†å£è®¾ç½®ä¸º ${width} Ã— ${height}`, 'pass');
            }

            // æµ‹è¯•å¤´éƒ¨å¸ƒå±€
            testHeaderLayout() {
                const header = document.querySelector('header');
                const userActions = document.querySelector('.user-actions');
                const searchContainer = document.querySelector('.search-container');
                
                if (!header) {
                    this.logResult(this.currentTest, 'å¤´éƒ¨å…ƒç´ æœªæ‰¾åˆ°', 'fail');
                    return;
                }

                // æ£€æŸ¥å¤´éƒ¨æ˜¯å¦å¯è§
                const headerRect = header.getBoundingClientRect();
                if (headerRect.height > 0) {
                    this.logResult(this.currentTest, `å¤´éƒ¨é«˜åº¦: ${Math.round(headerRect.height)}px`, 'pass');
                } else {
                    this.logResult(this.currentTest, 'å¤´éƒ¨é«˜åº¦ä¸º 0', 'fail');
                }

                // æ£€æŸ¥ç”¨æˆ·æ“ä½œåŒºåŸŸ
                if (userActions) {
                    const actionsRect = userActions.getBoundingClientRect();
                    const isVisible = actionsRect.width > 0 && actionsRect.height > 0;
                    this.logResult(this.currentTest, `ç”¨æˆ·æ“ä½œåŒºåŸŸå¯è§: ${isVisible}`, isVisible ? 'pass' : 'fail');
                }

                // æ£€æŸ¥æœç´¢æ¡†
                if (searchContainer) {
                    const searchRect = searchContainer.getBoundingClientRect();
                    const searchInput = searchContainer.querySelector('.search-input');
                    if (searchInput) {
                        const inputRect = searchInput.getBoundingClientRect();
                        this.logResult(this.currentTest, `æœç´¢æ¡†å®½åº¦: ${Math.round(inputRect.width)}px`, 'pass');
                    }
                }
            }

            // æµ‹è¯•å¯¼èˆªå¸ƒå±€
            testNavigationLayout() {
                const nav = document.querySelector('.category-nav');
                if (!nav) {
                    this.logResult(this.currentTest, 'å¯¼èˆªå…ƒç´ æœªæ‰¾åˆ°', 'fail');
                    return;
                }

                const navItems = nav.querySelectorAll('.nav-item');
                const navRect = nav.getBoundingClientRect();
                
                this.logResult(this.currentTest, `å¯¼èˆªé¡¹æ•°é‡: ${navItems.length}`, 'pass');
                this.logResult(this.currentTest, `å¯¼èˆªé«˜åº¦: ${Math.round(navRect.height)}px`, 'pass');

                // æ£€æŸ¥å¯¼èˆªé¡¹æ˜¯å¦æ¢è¡Œ
                let previousTop = null;
                let lineCount = 0;
                navItems.forEach((item, index) => {
                    const itemRect = item.getBoundingClientRect();
                    if (previousTop === null || Math.abs(itemRect.top - previousTop) > 5) {
                        lineCount++;
                        previousTop = itemRect.top;
                    }
                });
                
                this.logResult(this.currentTest, `å¯¼èˆªè¡Œæ•°: ${lineCount}`, lineCount <= 2 ? 'pass' : 'warning');
            }

            // æµ‹è¯•ç½‘æ ¼å¸ƒå±€
            testGridLayout() {
                const container = document.querySelector('.container');
                const categories = document.querySelectorAll('.category');
                const toolsGrids = document.querySelectorAll('.tools-grid');
                
                if (!container) {
                    this.logResult(this.currentTest, 'å®¹å™¨å…ƒç´ æœªæ‰¾åˆ°', 'fail');
                    return;
                }

                const containerRect = container.getBoundingClientRect();
                this.logResult(this.currentTest, `å®¹å™¨å®½åº¦: ${Math.round(containerRect.width)}px`, 'pass');

                // æ£€æŸ¥åˆ†ç±»å¸ƒå±€
                if (categories.length > 0) {
                    const firstCategory = categories[0];
                    const secondCategory = categories[1];
                    
                    if (firstCategory && secondCategory) {
                        const firstRect = firstCategory.getBoundingClientRect();
                        const secondRect = secondCategory.getBoundingClientRect();
                        
                        // æ£€æŸ¥æ˜¯å¦å¹¶æ’æ˜¾ç¤ºï¼ˆæ¡Œé¢ç«¯ï¼‰æˆ–å‚ç›´å †å ï¼ˆç§»åŠ¨ç«¯ï¼‰
                        const isSideBySide = Math.abs(firstRect.top - secondRect.top) < 50;
                        const isStacked = Math.abs(firstRect.top - secondRect.top) > 50;
                        
                        if (window.innerWidth > 1024 && isSideBySide) {
                            this.logResult(this.currentTest, 'æ¡Œé¢ç«¯åˆ†ç±»å¹¶æ’æ˜¾ç¤ºæ­£ç¡®', 'pass');
                        } else if (window.innerWidth <= 1024 && isStacked) {
                            this.logResult(this.currentTest, 'ç§»åŠ¨ç«¯åˆ†ç±»å‚ç›´å †å æ­£ç¡®', 'pass');
                        } else {
                            this.logResult(this.currentTest, 'åˆ†ç±»å¸ƒå±€å¯èƒ½æœ‰é—®é¢˜', 'warning');
                        }
                    }
                }

                // æ£€æŸ¥å·¥å…·ç½‘æ ¼
                toolsGrids.forEach((grid, index) => {
                    const toolCards = grid.querySelectorAll('.tool-card');
                    if (toolCards.length > 0) {
                        const gridRect = grid.getBoundingClientRect();
                        this.logResult(this.currentTest, `ç½‘æ ¼ ${index + 1} å·¥å…·å¡ç‰‡æ•°é‡: ${toolCards.length}`, 'pass');
                        
                        // æ£€æŸ¥å·¥å…·å¡ç‰‡å¸ƒå±€
                        this.checkToolCardLayout(toolCards, index + 1);
                    }
                });
            }

            // æ£€æŸ¥å·¥å…·å¡ç‰‡å¸ƒå±€
            checkToolCardLayout(toolCards, gridIndex) {
                if (toolCards.length < 2) return;

                const firstCard = toolCards[0];
                const secondCard = toolCards[1];
                const firstRect = firstCard.getBoundingClientRect();
                const secondRect = secondCard.getBoundingClientRect();

                // æ£€æŸ¥å¡ç‰‡æ˜¯å¦å¹¶æ’æˆ–å‚ç›´å †å 
                const isSideBySide = Math.abs(firstRect.top - secondRect.top) < 50;
                const isStacked = Math.abs(firstRect.top - secondRect.top) > 50;

                if (window.innerWidth > 480 && isSideBySide) {
                    this.logResult(this.currentTest, `ç½‘æ ¼ ${gridIndex} å·¥å…·å¡ç‰‡å¹¶æ’æ˜¾ç¤º`, 'pass');
                } else if (window.innerWidth <= 480 && isStacked) {
                    this.logResult(this.currentTest, `ç½‘æ ¼ ${gridIndex} å·¥å…·å¡ç‰‡å‚ç›´å †å `, 'pass');
                } else {
                    this.logResult(this.currentTest, `ç½‘æ ¼ ${gridIndex} å·¥å…·å¡ç‰‡å¸ƒå±€æ£€æŸ¥`, 'warning');
                }

                // æ£€æŸ¥å¡ç‰‡å°ºå¯¸
                toolCards.forEach((card, index) => {
                    const rect = card.getBoundingClientRect();
                    if (rect.width < 200) {
                        this.logResult(this.currentTest, `å¡ç‰‡ ${index + 1} å®½åº¦è¾ƒå°: ${Math.round(rect.width)}px`, 'warning');
                    }
                    if (rect.height < 80) {
                        this.logResult(this.currentTest, `å¡ç‰‡ ${index + 1} é«˜åº¦è¾ƒå°: ${Math.round(rect.height)}px`, 'warning');
                    }
                });
            }

            // æµ‹è¯•æ¨¡æ€æ¡†å¸ƒå±€
            testModalLayout() {
                const modal = document.getElementById('testModal');
                if (!modal) {
                    this.logResult(this.currentTest, 'æµ‹è¯•æ¨¡æ€æ¡†æœªæ‰¾åˆ°', 'fail');
                    return;
                }

                // æ˜¾ç¤ºæ¨¡æ€æ¡†
                modal.classList.add('show');
                
                setTimeout(() => {
                    const modalContent = modal.querySelector('.modal-content');
                    if (modalContent) {
                        const contentRect = modalContent.getBoundingClientRect();
                        const viewportWidth = window.innerWidth;
                        const viewportHeight = window.innerHeight;
                        
                        // æ£€æŸ¥æ¨¡æ€æ¡†æ˜¯å¦åœ¨è§†å£å†…
                        const isInViewport = contentRect.left >= 0 && 
                                           contentRect.right <= viewportWidth && 
                                           contentRect.top >= 0 && 
                                           contentRect.bottom <= viewportHeight;
                        
                        this.logResult(this.currentTest, `æ¨¡æ€æ¡†åœ¨è§†å£å†…: ${isInViewport}`, isInViewport ? 'pass' : 'warning');
                        this.logResult(this.currentTest, `æ¨¡æ€æ¡†å°ºå¯¸: ${Math.round(contentRect.width)} Ã— ${Math.round(contentRect.height)}`, 'pass');
                        
                        // æ£€æŸ¥è¡¨å•å…ƒç´ 
                        this.testFormElements(modalContent);
                    }
                    
                    // éšè—æ¨¡æ€æ¡†
                    modal.classList.remove('show');
                }, 200);
            }

            // æµ‹è¯•è¡¨å•å…ƒç´ 
            testFormElements(container) {
                const inputs = container.querySelectorAll('.form-input');
                const buttons = container.querySelectorAll('.form-submit-btn');
                const checkboxes = container.querySelectorAll('.checkbox-input');

                inputs.forEach((input, index) => {
                    const rect = input.getBoundingClientRect();
                    const minTouchSize = 44; // æ¨èçš„æœ€å°è§¦æ‘¸å°ºå¯¸
                    
                    if (rect.height >= minTouchSize) {
                        this.logResult(this.currentTest, `è¾“å…¥æ¡† ${index + 1} è§¦æ‘¸å‹å¥½ (${Math.round(rect.height)}px)`, 'pass');
                    } else {
                        this.logResult(this.currentTest, `è¾“å…¥æ¡† ${index + 1} é«˜åº¦ä¸è¶³ (${Math.round(rect.height)}px)`, 'warning');
                    }
                });

                buttons.forEach((button, index) => {
                    const rect = button.getBoundingClientRect();
                    const minTouchSize = 44;
                    
                    if (rect.height >= minTouchSize) {
                        this.logResult(this.currentTest, `æŒ‰é’® ${index + 1} è§¦æ‘¸å‹å¥½ (${Math.round(rect.height)}px)`, 'pass');
                    } else {
                        this.logResult(this.currentTest, `æŒ‰é’® ${index + 1} é«˜åº¦ä¸è¶³ (${Math.round(rect.height)}px)`, 'warning');
                    }
                });

                checkboxes.forEach((checkbox, index) => {
                    const rect = checkbox.getBoundingClientRect();
                    if (rect.width >= 18 && rect.height >= 18) {
                        this.logResult(this.currentTest, `å¤é€‰æ¡† ${index + 1} å°ºå¯¸åˆé€‚`, 'pass');
                    } else {
                        this.logResult(this.currentTest, `å¤é€‰æ¡† ${index + 1} å°ºå¯¸è¿‡å°`, 'warning');
                    }
                });
            }

            // æµ‹è¯•æŒ‰é’®ä½ç½®
            testButtonPositions() {
                const backToTop = document.getElementById('backToTop');
                const addToolBtn = document.getElementById('addToolBtn');

                if (backToTop) {
                    const rect = backToTop.getBoundingClientRect();
                    const isVisible = rect.width > 0 && rect.height > 0;
                    this.logResult(this.currentTest, `è¿”å›é¡¶éƒ¨æŒ‰é’®å¯è§: ${isVisible}`, 'pass');
                    
                    if (isVisible) {
                        const isInBottomRight = rect.right > window.innerWidth - 100 && 
                                              rect.bottom > window.innerHeight - 100;
                        this.logResult(this.currentTest, `è¿”å›é¡¶éƒ¨æŒ‰é’®ä½ç½®æ­£ç¡®: ${isInBottomRight}`, isInBottomRight ? 'pass' : 'warning');
                    }
                }

                if (addToolBtn) {
                    const rect = addToolBtn.getBoundingClientRect();
                    const isVisible = rect.width > 0 && rect.height > 0;
                    this.logResult(this.currentTest, `æ·»åŠ å·¥å…·æŒ‰é’®å¯è§: ${isVisible}`, 'pass');
                }
            }

            // æµ‹è¯•è§¦æ‘¸äº¤äº’
            testTouchInteractions() {
                const toolActions = document.querySelectorAll('.tool-actions');
                
                toolActions.forEach((actions, index) => {
                    const rect = actions.getBoundingClientRect();
                    const isVisible = window.getComputedStyle(actions).opacity !== '0';
                    
                    if (window.innerWidth <= 768) {
                        // åœ¨ç§»åŠ¨ç«¯ï¼Œå·¥å…·æ“ä½œåº”è¯¥å§‹ç»ˆå¯è§
                        this.logResult(this.currentTest, `å·¥å…·æ“ä½œ ${index + 1} åœ¨ç§»åŠ¨ç«¯å¯è§: ${isVisible}`, isVisible ? 'pass' : 'warning');
                    }
                });

                // æ£€æŸ¥æ“ä½œæŒ‰é’®å°ºå¯¸
                const actionButtons = document.querySelectorAll('.tool-action-btn');
                actionButtons.forEach((button, index) => {
                    const rect = button.getBoundingClientRect();
                    const minTouchSize = 44;
                    
                    if (rect.width >= minTouchSize && rect.height >= minTouchSize) {
                        this.logResult(this.currentTest, `æ“ä½œæŒ‰é’® ${index + 1} è§¦æ‘¸å‹å¥½`, 'pass');
                    } else {
                        this.logResult(this.currentTest, `æ“ä½œæŒ‰é’® ${index + 1} å°ºå¯¸ä¸è¶³ (${Math.round(rect.width)}Ã—${Math.round(rect.height)})`, 'warning');
                    }
                });
            }

            // æµ‹è¯•ç§»åŠ¨ç«¯ç‰¹å®šåŠŸèƒ½
            testMobileSpecificFeatures() {
                // æ£€æŸ¥è§†å£å…ƒæ ‡ç­¾
                const viewportMeta = document.querySelector('meta[name="viewport"]');
                if (viewportMeta) {
                    const content = viewportMeta.getAttribute('content');
                    const hasCorrectViewport = content.includes('width=device-width') && content.includes('initial-scale=1.0');
                    this.logResult(this.currentTest, `è§†å£å…ƒæ ‡ç­¾é…ç½®æ­£ç¡®: ${hasCorrectViewport}`, hasCorrectViewport ? 'pass' : 'fail');
                } else {
                    this.logResult(this.currentTest, 'ç¼ºå°‘è§†å£å…ƒæ ‡ç­¾', 'fail');
                }

                // æ£€æŸ¥å­—ä½“å¤§å°
                const body = document.body;
                const computedStyle = window.getComputedStyle(body);
                const fontSize = parseFloat(computedStyle.fontSize);
                
                if (fontSize >= 14) {
                    this.logResult(this.currentTest, `åŸºç¡€å­—ä½“å¤§å°åˆé€‚: ${fontSize}px`, 'pass');
                } else {
                    this.logResult(this.currentTest, `åŸºç¡€å­—ä½“å¤§å°è¿‡å°: ${fontSize}px`, 'warning');
                }

                // æ£€æŸ¥æ°´å¹³æ»šåŠ¨
                const hasHorizontalScroll = document.body.scrollWidth > window.innerWidth;
                this.logResult(this.currentTest, `æ— æ°´å¹³æ»šåŠ¨: ${!hasHorizontalScroll}`, !hasHorizontalScroll ? 'pass' : 'warning');
            }

            // è¿è¡Œæ‰€æœ‰æµ‹è¯•
            runAllTests() {
                this.clearResults();
                this.logResult('å…¨é¢æµ‹è¯•', 'å¼€å§‹è¿è¡Œæ‰€æœ‰å“åº”å¼æµ‹è¯•', 'pass');
                
                // ä¾æ¬¡æµ‹è¯•ä¸åŒå°ºå¯¸
                this.testDesktopLayout();
                
                setTimeout(() => {
                    this.testTabletLayout();
                }, 1000);
                
                setTimeout(() => {
                    this.testMobileLayout();
                }, 2000);
                
                setTimeout(() => {
                    // æ¢å¤åŸå§‹è§†å£
                    document.body.style.width = '';
                    document.body.style.maxWidth = '';
                    document.body.style.margin = '';
                    document.body.style.border = '';
                    window.dispatchEvent(new Event('resize'));
                    
                    this.logResult('å…¨é¢æµ‹è¯•', 'æ‰€æœ‰å“åº”å¼æµ‹è¯•å®Œæˆ', 'pass');
                    this.generateTestSummary();
                }, 3000);
            }

            // ç”Ÿæˆæµ‹è¯•æ‘˜è¦
            generateTestSummary() {
                const totalTests = this.testResults.length;
                const passedTests = this.testResults.filter(r => r.type === 'pass').length;
                const failedTests = this.testResults.filter(r => r.type === 'fail').length;
                const warningTests = this.testResults.filter(r => r.type === 'warning').length;
                
                this.logResult('æµ‹è¯•æ‘˜è¦', 
                    `æ€»è®¡: ${totalTests} | é€šè¿‡: ${passedTests} | å¤±è´¥: ${failedTests} | è­¦å‘Š: ${warningTests}`, 
                    failedTests === 0 ? 'pass' : 'warning'
                );
            }

            // æ¸…é™¤æµ‹è¯•ç»“æœ
            clearResults() {
                this.testResults = [];
                this.updateResultsDisplay();
            }
        }

        // åˆå§‹åŒ–æµ‹è¯•å™¨
        const tester = new ResponsiveLayoutTester();

        // å…¨å±€å‡½æ•°
        function testDesktopLayout() {
            tester.testDesktopLayout();
        }

        function testTabletLayout() {
            tester.testTabletLayout();
        }

        function testMobileLayout() {
            tester.testMobileLayout();
        }

        function runAllTests() {
            tester.runAllTests();
        }

        function clearResults() {
            tester.clearResults();
        }

        function closeTestModal() {
            document.getElementById('testModal').classList.remove('show');
        }

        // è‡ªåŠ¨å¼€å§‹æµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(() => {
                tester.logResult('åˆå§‹åŒ–', 'å“åº”å¼æµ‹è¯•å™¨å·²å‡†å¤‡å°±ç»ª', 'pass');
                tester.logResult('æç¤º', 'ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•ä¸åŒè®¾å¤‡çš„å¸ƒå±€', 'pass');
            }, 500);
        });
    </script>
</body>
</html>